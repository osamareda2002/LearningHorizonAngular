<div class="add-container" [class.sidebar-open]="isSidebarOpen">
  <!-- Sidebar -->
  <app-sidebar [isAdmin]="isAdmin" (close)="toggleSidebar()"></app-sidebar>

  <!-- Overlay for mobile -->
  <div class="sidebar-overlay" (click)="toggleSidebar()"></div>

  <!-- Main Content -->
  <main class="main-content">
    <button class="menu-toggle-btn" (click)="toggleSidebar()">
      <i class="bi bi-list"></i>
    </button>
    <!-- User Navbar -->
    <div class="user-navbar">
      <h2 class="page-title">Add Content</h2>
      <div class="user-menu">
        <span class="user-name">{{ userName }}</span>
        <div class="dropdown">
          <button class="dropdown-toggle" (click)="toggleDropdown()">
            <i class="bi bi-chevron-down"></i>
          </button>
          <div class="dropdown-menu" [class.show]="isDropdownOpen">
            <a *ngIf="isLoggedIn" (click)="handleLogout()">Logout</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-error">
      <i class="bi bi-exclamation-circle"></i>
      <span>{{ errorMessage }}</span>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="alert alert-success">
      <i class="bi bi-check-circle"></i>
      <span>{{ successMessage }}</span>
    </div>

    <!-- Tabs -->
    <div class="tabs-container">
      <div class="tabs-header">
        <button class="tab-btn" [class.active]="activeTab === 'category'" (click)="switchTab('category')">
          <i class="bi bi-folder"></i> Category
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'course'" (click)="switchTab('course')">
          <i class="bi bi-mortarboard"></i> Add Course
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'lesson'" (click)="switchTab('lesson')">
          <i class="bi bi-film"></i>
          Add Lesson
        </button>

        <button class="tab-btn" [class.active]="activeTab === 'doctor'" (click)="switchTab('doctor')">
          <i class="bi bi-person-plus"></i>
          Add Person
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'slider'" (click)="switchTab('slider')">
          <i class="bi bi-images"></i>
          Slider
        </button>

        <button class="tab-btn" [class.active]="activeTab === 'suggestion'" (click)="switchTab('suggestion')">
          <i class="bi bi-lightbulb"></i>
          Suggestion
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tabs-content">
        <!-- Category Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'category'">
          <h3 class="tab-title">Add New Category</h3>
          <form [formGroup]="categoryForm" (ngSubmit)="submitCategory()" class="form-container">
            <div class="category-form-layout">
              <div class="category-inputs">
                <div class="form-group">
                  <label>Category Title <span class="required">*</span></label>
                  <input type="text" class="form-control" formControlName="title" placeholder="Enter category title"
                    [class.error]="
                      categoryForm.get('title')?.invalid && categoryForm.get('title')?.touched
                    " />
                </div>

                <div class="form-group">
                  <label>About</label>
                  <textarea class="form-control textarea" formControlName="about"
                    placeholder="Describe this category..." rows="5"></textarea>
                </div>
              </div>

              <div class="category-upload-section">
                <div class="form-group">
                  <label>Upload Photo <span class="required">*</span></label>
                  <div class="upload-zone" [class.has-preview]="categoryImagePreview">
                    <div class="upload-placeholder" *ngIf="!categoryImagePreview">
                      <i class="bi bi-image-fill"></i>
                      <p class="upload-text">Upload Photo</p>
                      <p class="upload-hint">PNG, JPEG, files are allowed</p>
                    </div>
                    <div class="preview-container" *ngIf="categoryImagePreview">
                      <img [src]="categoryImagePreview" alt="Category Preview" />
                      <button type="button" class="remove-btn"
                        (click)="categoryImagePreview = null; categoryImage = null">
                        <i class="bi bi-x"></i>
                      </button>
                    </div>
                    <input type="file" class="file-input" (change)="onThumbnailSelected($event, 'category')"
                      accept="image/jpeg, image/png" />
                  </div>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetCategoryForm()">
                Cancel
              </button>
              <button type="submit" class="btn btn-publish"
                [disabled]="categoryForm.invalid || !categoryImage || submitting">
                {{ submitting ? 'Publishing...' : 'Publish Now' }}
              </button>
            </div>
          </form>
        </div>

        <!-- Course Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'course'">
          <h3 class="tab-title">The Details Course</h3>
          <form [formGroup]="courseForm" (ngSubmit)="submitCourse()" class="form-container">
            <div class="form-grid">
              <div class="form-group">
                <label>Select Category <span class="required">*</span></label>
                <select class="form-control" formControlName="categoryId" [class.error]="
                    courseForm.get('categoryId')?.invalid && courseForm.get('categoryId')?.touched
                  ">
                  <option value="" disabled>Select Category</option>
                  <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.title }}</option>
                </select>
              </div>

              <div class="form-group">
                <label>Course Title <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="title" placeholder="Give Your Course A Title"
                  [class.error]="
                    courseForm.get('title')?.invalid && courseForm.get('title')?.touched
                  " />
              </div>
              <div class="form-group">
                <label>Price <span class="required">*</span></label>
                <input type="number" class="form-control" formControlName="price" placeholder="0 for free course"
                  [class.error]="
                    courseForm.get('price')?.invalid && courseForm.get('price')?.touched
                  " />
              </div>
              <div class="form-group">
                <label>Instructor Name <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="instructorName" placeholder="Your Name"
                  [class.error]="
                    courseForm.get('instructorName')?.invalid &&
                    courseForm.get('instructorName')?.touched
                  " />
              </div>

              <div class="form-group full-width">
                <label>Course Thumbnail <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-image"></i>
                  <p>Upload Course Cover Image</p>
                  <p class="upload-info">PNG and JPG files are allowed</p>
                  <input type="file" class="file-input" (change)="onThumbnailSelected($event, 'course')"
                    accept="image/jpeg, image/png" />
                </div>

                <!-- ✅ Preview the selected image -->
                <div *ngIf="courseThumbnailPreview" class="thumbnail-preview">
                  <img [src]="courseThumbnailPreview" alt="Thumbnail Preview" />
                  <p class="file-name">{{ courseThumbnail?.name }}</p>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetCourseForm()">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="courseForm.invalid || submitting">
                {{ submitting ? 'Publishing...' : 'Publish now' }}
              </button>
            </div>
          </form>
        </div>

        <!-- Lesson Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'lesson'">
          <h3 class="tab-title">The Details Lesson</h3>
          <form [formGroup]="lessonForm" (ngSubmit)="submitLesson()" class="form-container">
            <div class="form-grid">
              <div class="form-group">
                <label>Select Course <span class="required">*</span></label>
                <select class="form-control" formControlName="courseId" [class.error]="
                    lessonForm.get('courseId')?.invalid && lessonForm.get('courseId')?.touched
                  ">
                  <option value="">Choose a Course</option>
                  <option *ngFor="let course of courses" [value]="course.courseId">
                    {{ course.courseTitle }}
                  </option>
                </select>
              </div>

              <div class="form-group">
                <label>Lesson Title <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="title" placeholder="Lesson Title"
                  [class.error]="
                    lessonForm.get('title')?.invalid && lessonForm.get('title')?.touched
                  " />
              </div>

              <div class="form-group">
                <label>Lesson Order <span class="required">*</span></label>
                <input type="number" class="form-control" formControlName="order" placeholder="Lesson Number"
                  [class.error]="
                    lessonForm.get('order')?.invalid && lessonForm.get('order')?.touched
                  " />
              </div>

              <div class="form-group">
                <label>Is Free? <span class="required">*</span></label>
                <select class="form-control" formControlName="isFree" [class.error]="
                    lessonForm.get('isFree')?.invalid && lessonForm.get('isFree')?.touched
                  ">
                  <option [value]="true">Free</option>
                  <option [value]="false">Premium</option>
                </select>
              </div>

              <div class="form-group full-width">
                <label>Lesson Video <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-play-btn"></i>
                  <p>Upload Lesson Video</p>
                  <p class="upload-info">MP4 and WebM files are allowed</p>
                  <input type="file" class="file-input" (change)="onVideoSelected($event, 'lesson')"
                    accept="video/mp4, video/webm" />
                </div>

                <!-- ✅ Preview -->
                <div *ngIf="lessonVideoPreview">
                  <video [src]="lessonVideoPreview" width="100%" height="240" controls
                    (loadedmetadata)="onVideoLoadedMetadata($event, 'lesson')"></video>
                  <p *ngIf="lessonDurationInSeconds">
                    ⏱ Duration: {{ lessonDurationInMinutes }} Min
                  </p>
                </div>

                <div *ngIf="uploadProgress > 0 || bunnyUploadStatus" class="upload-progress">
                  <div class="progress-bar" [style.width.%]="uploadProgress"></div>
                  <span class="progress-label">{{ uploadProgress | number: '1.0-0' }}%</span>
                </div>
                <p *ngIf="bunnyUploadStatus" class="bunny-upload-status">
                  <i class="bi bi-cloud-upload"></i> {{ bunnyUploadStatus }}
                </p>
              </div>
            </div>

            <div class="mcq-section">
              <button type="button" class="btn-add-mcq" (click)="addMCQ()">
                <i class="bi bi-plus-circle"></i>
                Add MCQ
              </button>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetLessonForm()">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="lessonForm.invalid || submitting">
                {{ submitting ? 'Uploading...' : 'Submit' }}
              </button>
            </div>
          </form>
        </div>

        <!-- Doctor Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'doctor'">
          <h3 class="tab-title">Add New Team Member</h3>
          <form [formGroup]="doctorForm" (ngSubmit)="submitDoctor()" class="form-container">
            <div class="form-grid">
              <!-- Identity Selection -->
              <!-- <div class="form-group">
                <label>Person Identity</label>
                <div class="toggle-group">
                  <label class="toggle-switch">
                    <input type="checkbox" formControlName="isDeveloper">
                    <span class="slider"></span>
                  </label>
                  <span>{{ doctorForm.get('isDeveloper')?.value ? 'Developer' : 'Doctor' }}</span>
                </div>
              </div> -->

              <!-- Doctor Name -->
              <div class="form-group">
                <label>Name <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="name" placeholder="Name"
                  [class.error]="doctorForm.get('name')?.invalid && doctorForm.get('name')?.touched" />
              </div>
              
              <!-- Tag -->
              <div class="form-group">
                <label>Tag (Optional)</label>
                <input type="text" class="form-control" formControlName="tag" placeholder="e.g. CEO, Founder" />
              </div>


              <!-- Specialty -->
              <div class="form-group">
                <label>Specialty <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="specialty"
                  placeholder="e.g. Neurology Specialist" [class.error]="
                    doctorForm.get('specialty')?.invalid && doctorForm.get('specialty')?.touched
                  " />
              </div>

              <!-- About -->
              <div class="form-group full-width">
                <label>About <span class="required">*</span></label>
                <textarea class="form-control" formControlName="about" placeholder="About the doctor..." rows="4"
                  [class.error]="
                    doctorForm.get('about')?.invalid && doctorForm.get('about')?.touched
                  "></textarea>
              </div>

              <!-- Expertise -->
              <div class="form-group full-width">
                <label>Expertise <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="expertise"
                  placeholder="e.g. Sports Injury, Rehabilitation (Comma separated)" [class.error]="
                    doctorForm.get('expertise')?.invalid && doctorForm.get('expertise')?.touched
                  " />
              </div>

              <!-- Social Media Links -->
              <div class="form-group">
                <label>Facebook</label>
                <input type="text" class="form-control" formControlName="facebook"
                  placeholder="https://facebook.com/..." />
              </div>

              <div class="form-group">
                <label>WhatsApp</label>
                <input type="text" class="form-control" formControlName="whatsapp" placeholder="https://wa.me/..." />
              </div>

              <div class="form-group">
                <label>Instagram</label>
                <input type="text" class="form-control" formControlName="instagram"
                  placeholder="https://instagram.com/..." />
              </div>

              <!-- Upload Photo -->
              <div class="form-group">
                <label>Upload Photo <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-image"></i>
                  <p>Upload Photo</p>
                  <p class="upload-info">PNG, JPEG files are allowed</p>
                  <input type="file" class="file-input" (change)="onDoctorImageSelected($event)"
                    accept="image/jpeg, image/png" />
                </div>
                <!-- Preview -->
                <div *ngIf="doctorImagePreview" class="thumbnail-preview">
                  <img [src]="doctorImagePreview" alt="Doctor Preview" class="item-thumbnail doctor-thumbnail" />
                  <p class="file-name">{{ doctorImage?.name }}</p>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetDoctorForm()">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="doctorForm.invalid || submitting">
                {{ submitting ? 'Adding...' : 'Add' }}
              </button>
            </div>
          </form>
        </div>

        <!-- Book Tab -->
        <!-- <div class="tab-pane" *ngIf="activeTab === 'book'">
          <h3 class="tab-title">The Details Book</h3>
          <form [formGroup]="bookForm" (ngSubmit)="submitBook()" class="form-container">
            <div class="form-grid">
              <div class="form-group">
                <label>Book Title <span class="required">*</span></label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="title"
                  placeholder="Give Your Book A Title"
                  [class.error]="bookForm.get('title')?.invalid && bookForm.get('title')?.touched"
                />
              </div>

              <div class="form-group">
                <label>Price <span class="required">*</span></label>
                <input
                  type="number"
                  class="form-control"
                  formControlName="price"
                  placeholder="0 for free book"
                  [class.error]="bookForm.get('price')?.invalid && bookForm.get('price')?.touched"
                />
              </div>

              <div class="form-group">
                <label>Author Name <span class="required">*</span></label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="authorName"
                  placeholder="Author Name"
                  [class.error]="
                    bookForm.get('authorName')?.invalid && bookForm.get('authorName')?.touched
                  "
                />
              </div>

              <div class="form-group">
                <label>Number of Pages <span class="required">*</span></label>
                <input
                  type="number"
                  class="form-control"
                  formControlName="pages"
                  placeholder="Number of Pages"
                  [class.error]="bookForm.get('pages')?.invalid && bookForm.get('pages')?.touched"
                />
              </div>

              <div class="form-group full-width">
                <label>Description <span class="required">*</span></label>
                <textarea
                  class="form-control textarea"
                  formControlName="description"
                  placeholder="Write Description About Your Book"
                  rows="5"
                  [class.error]="
                    bookForm.get('description')?.invalid && bookForm.get('description')?.touched
                  "
                ></textarea>
              </div>

              <div class="form-group full-width">
                <label>Book Cover <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-image"></i>
                  <p>Upload Book Cover</p>
                  <p class="upload-info">PNG, JPG, and GIF files are allowed</p>
                  <input
                    type="file"
                    class="file-input"
                    (change)="onThumbnailSelected($event, 'book')"
                    accept="image/*"
                  />
                </div>
              </div>

              <div class="form-group full-width">
                <label>Book PDF <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-file-pdf"></i>
                  <p>Upload Book PDF</p>
                  <p class="upload-info">PDF files are allowed</p>
                  <input
                    type="file"
                    class="file-input"
                    (change)="onBookPdfSelected($event)"
                    accept=".pdf"
                  />
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetBookForm()">Cancel</button>
              <button
                type="submit"
                class="btn btn-primary"
                [disabled]="bookForm.invalid || submitting"
              >
                {{ submitting ? 'Publishing...' : 'Publish now' }}
              </button>
            </div>
          </form>
        </div> -->

        <!-- Slider Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'slider'">
          <h3 class="tab-title">Add New Slider</h3>

          <form [formGroup]="sliderForm" (ngSubmit)="submitSlider()" class="form-container">
            <div class="form-grid">
              <!-- Slider Title -->
              <div class="form-group">
                <label>Slider Title <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="title"
                  placeholder="Enter a title for the slider (e.g., New Course: Eye Anatomy)" [class.error]="
                    sliderForm.get('title')?.invalid && sliderForm.get('title')?.touched
                  " />
              </div>

              <!-- Redirect URL -->
              <div class="form-group">
                <label>Redirect URL (Optional)</label>
                <input type="text" class="form-control" formControlName="redirectUrl"
                  placeholder="Example: /courses/1" />
              </div>

              <!-- Upload Image -->
              <div class="form-group full-width">
                <label>Slider Image <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-image"></i>
                  <p>Upload Slider Image</p>
                  <p class="upload-info">PNG and JPG files are allowed</p>
                  <input type="file" class="file-input" (change)="onSliderImageSelected($event)"
                    accept="image/jpeg, image/png" />
                </div>

                <!-- ✅ Preview the selected image -->
                <div *ngIf="sliderImagePreview" class="thumbnail-preview">
                  <img [src]="sliderImagePreview" alt="Slider Preview" />
                  <p class="file-name">{{ sliderImage?.name }}</p>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetSliderForm()">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="sliderForm.invalid || submitting">
                {{ submitting ? 'Uploading...' : 'Add Slider' }}
              </button>
            </div>
          </form>
        </div>

        <!-- Suggestion Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'suggestion'">
          <h3 class="tab-title">Add New Suggestion</h3>

          <form [formGroup]="suggestionForm" (ngSubmit)="submitSuggestion()" class="form-container">
            <div class="form-grid">
              <div class="form-group">
                <label>Title <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="title" placeholder="Video Title" />
              </div>

              <div class="form-group">
                <label>Instructor Name <span class="required">*</span></label>
                <input type="text" class="form-control" formControlName="instructorName"
                  placeholder="Instructor Name" />
              </div>

              <!-- ✅ Video Upload Box -->
              <div class="form-group full-width">
                <label>Video File <span class="required">*</span></label>
                <div class="upload-box">
                  <i class="bi bi-play-btn"></i>
                  <p>Upload Suggestion Video</p>
                  <p class="upload-info">MP4 and WebM files are allowed</p>
                  <input type="file" class="file-input" (change)="onVideoSelected($event, 'suggestion')"
                    accept="video/mp4, video/webm" />
                </div>

                <!-- ✅ Video loaded preview -->
                <div *ngIf="suggestionVideoPreview">
                  <video [src]="suggestionVideoPreview" width="100%" height="240" controls
                    (loadedmetadata)="onVideoLoadedMetadata($event, 'suggestion')"></video>
                </div>

                <!-- ✅ Upload Progress -->
                <div *ngIf="uploadProgress > 0" class="upload-progress">
                  <div class="progress-bar" [style.width.%]="uploadProgress"></div>
                  <span class="progress-label">{{ uploadProgress | number: '1.0-0' }}%</span>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-cancel" (click)="resetSuggestionForm()">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="suggestionForm.invalid || submitting">
                {{ submitting ? 'Uploading...' : 'Add Suggestion' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- MCQ Modal -->
  <div class="mcq-modal-overlay" *ngIf="showMCQModal" (click)="closeMCQModal()">
    <div class="mcq-modal-content" (click)="$event.stopPropagation()">
      <div class="mcq-modal-header">
        <h2 class="mcq-modal-title">The Details MCQ</h2>
      </div>

      <form [formGroup]="mcqForm" class="mcq-form-grid">
        <div class="mcq-question-section">
          <label>* Question Text</label>
          <input type="text" class="mcq-question-input" formControlName="questionText"
            placeholder="Enter The Question Here ...." />
        </div>

        <div class="mcq-answers-upload-wrapper">
          <div class="mcq-answers-section">
            <div class="mcq-answers-header">
              <span class="mcq-answers-title">* Answers Text , Select Correct Answer</span>
            </div>

            <div class="mcq-answer-options">
              <div class="mcq-answer-item">
                <div class="mcq-answer-letter">A</div>
                <input type="text" class="mcq-answer-input" formControlName="answerA"
                  placeholder="Enter The Answers Here ...." />
                <input type="radio" class="mcq-radio" formControlName="correctAnswer" value="A" />
              </div>

              <div class="mcq-answer-item">
                <div class="mcq-answer-letter">B</div>
                <input type="text" class="mcq-answer-input" formControlName="answerB"
                  placeholder="Enter The Answers Here ...." />
                <input type="radio" class="mcq-radio" formControlName="correctAnswer" value="B" />
              </div>

              <div class="mcq-answer-item">
                <div class="mcq-answer-letter">C</div>
                <input type="text" class="mcq-answer-input" formControlName="answerC"
                  placeholder="Enter The Answers Here ...." />
                <input type="radio" class="mcq-radio" formControlName="correctAnswer" value="C" />
              </div>

              <div class="mcq-answer-item">
                <div class="mcq-answer-letter">D</div>
                <input type="text" class="mcq-answer-input" formControlName="answerD"
                  placeholder="Enter The Answers Here ...." />
                <input type="radio" class="mcq-radio" formControlName="correctAnswer" value="D" />
              </div>
            </div>
          </div>

          <div class="mcq-upload-container">
            <span class="mcq-upload-label">* Upload Image</span>
            <div class="mcq-upload-box">
              <i class="bi bi-image"></i>
              <p>Upload Files</p>
              <p class="mcq-upload-info">PNG, JPEG, and PDF files are allowed</p>
              <input type="file" class="file-input" (change)="onMCQImageSelected($event)"
                accept="image/jpeg, image/png, application/pdf" />
            </div>
            <div *ngIf="mcqImagePreview" class="mcq-image-preview">
              <img [src]="mcqImagePreview" alt="MCQ Image Preview" />
            </div>
          </div>
        </div>

        <div class="mcq-explanation-section">
          <label>* Enter Explanation</label>
          <textarea class="mcq-explanation-textarea" formControlName="explanation"
            placeholder="Enter The Explanation Here ...."></textarea>
        </div>
      </form>

      <!-- Modal Actions -->
      <div class="mcq-modal-actions">
        <button type="button" class="btn-mcq-cancel" (click)="closeMCQModal()">Cancel</button>
        <button type="button" class="btn-mcq-save" (click)="saveMCQ()" [disabled]="mcqForm.invalid">
          Save
        </button>
      </div>
    </div>
  </div>

  <!-- MCQ List Modal -->
  <div class="mcq-list-modal-overlay" *ngIf="showMCQListModal" (click)="closeMCQListModal()">
    <div class="mcq-list-modal-content" (click)="$event.stopPropagation()">
      <div class="mcq-list-modal-header">
        <h2 class="mcq-list-modal-title">The Details MCQ</h2>
      </div>

      <div class="mcq-list-container">
        <div *ngIf="lessonExercises.length === 0" class="mcq-empty-state">
          <p>No MCQs added yet. Click "Add MCQ" to get started.</p>
        </div>

        <div *ngFor="let exercise of lessonExercises; let i = index" class="mcq-list-item">
          <div class="mcq-list-item-content">
            <div class="mcq-list-item-number">Q {{ i + 1 }} /</div>
            <div class="mcq-list-item-question">
              {{ exercise.questionText || 'Which nerve provides sensation to the .......' }}
            </div>
          </div>
          <div class="mcq-list-item-actions">
            <button type="button" class="mcq-list-action-btn mcq-list-action-delete" (click)="deleteMCQ(i)"
              title="Delete MCQ">
              <i class="bi bi-trash"></i>
            </button>
            <button type="button" class="mcq-list-action-btn mcq-list-action-edit" (click)="editMCQ(i)"
              title="Edit MCQ">
              <i class="bi bi-pencil"></i>
            </button>
            <button type="button" class="mcq-list-action-btn mcq-list-action-reorder" title="Reorder MCQ" disabled>
              <i class="bi bi-list"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="mcq-list-modal-actions">
        <button type="button" class="btn-mcq-add-from-list" (click)="addNewMCQFromList()">
          <i class="bi bi-plus-circle"></i>
          Add MCQ
        </button>
        <button type="button" class="btn-mcq-list-submit" (click)="submitMCQList()">Submit</button>
      </div>
    </div>
  </div>
</div>