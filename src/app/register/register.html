<div class="register-container">
  <div class="decorative-logo left"></div>

  <div class="register-card">
    <h1 class="register-title">Create Account</h1>

    <!-- Error Message Display -->
    <div *ngIf="errorMessage" class="alert-error">
      <i class="bi bi-exclamation-circle"></i>
      <span>{{ errorMessage }}</span>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="form-group name-group">
        <div class="half-input">
          <label>First name</label>
          <input
            type="text"
            class="form-control"
            formControlName="firstName"
            placeholder="Enter your first name"
            [class.error]="
              registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched
            "
          />
          <small
            *ngIf="
              registerForm.get('firstName')?.hasError('required') &&
              registerForm.get('firstName')?.touched
            "
            class="error-text"
          >
            First name is required
          </small>
        </div>

        <div class="half-input">
          <label>Last name</label>
          <input
            type="text"
            class="form-control"
            formControlName="lastName"
            placeholder="Enter your last name"
            [class.error]="
              registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched
            "
          />
          <small
            *ngIf="
              registerForm.get('lastName')?.hasError('required') &&
              registerForm.get('lastName')?.touched
            "
            class="error-text"
          >
            Last name is required
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input
          type="email"
          class="form-control"
          formControlName="email"
          placeholder="Enter your email"
          [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
        />
        <small
          *ngIf="registerForm.get('email')?.hasError('email') && registerForm.get('email')?.touched"
          class="error-text"
        >
          Please enter a valid email
        </small>
      </div>

      <div class="form-group">
        <label>Password</label>
        <div class="password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-control"
            formControlName="password"
            placeholder="Create a password"
            [class.error]="
              registerForm.get('password')?.invalid && registerForm.get('password')?.touched
            "
          />
          <i
            [class]="showPassword ? 'bi bi-eye' : 'bi bi-eye-slash'"
            class="password-icon"
            (click)="togglePasswordVisibility()"
          ></i>
        </div>
        <small
          *ngIf="
            registerForm.get('password')?.hasError('minlength') &&
            registerForm.get('password')?.touched
          "
          class="error-text"
        >
          Password must be at least 6 characters
        </small>
      </div>

      <div class="form-group">
        <label>Confirm Password</label>
        <div class="password-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            class="form-control"
            formControlName="confirmPassword"
            placeholder="Confirm your password"
            [class.error]="
              registerForm.get('confirmPassword')?.invalid &&
              registerForm.get('confirmPassword')?.touched
            "
          />
          <i
            [class]="showConfirmPassword ? 'bi bi-eye' : 'bi bi-eye-slash'"
            class="password-icon"
            (click)="toggleConfirmPasswordVisibility()"
          ></i>
        </div>
        <small
          *ngIf="
            registerForm.hasError('passwordMismatch') &&
            registerForm.get('confirmPassword')?.touched
          "
          class="error-text"
        >
          Passwords do not match
        </small>
      </div>

      <button type="submit" class="btn-next" [disabled]="loading || registerForm.invalid">
        <span *ngIf="!loading">NEXT</span>
        <span *ngIf="loading">CREATING ACCOUNT...</span>
      </button>

      <div class="login-link">Already have an account? <a routerLink="/login">Login</a></div>
    </form>
  </div>

  <div class="decorative-logo right"></div>
</div>
